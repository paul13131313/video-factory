<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Factory</title>
<meta name="description" content="AIチャットの会話をそのまま動画に変換。Claude・ChatGPT・LINEの3種類のスキンに対応。">
<meta property="og:title" content="Video Factory">
<meta property="og:description" content="AIチャットの会話をそのまま動画に変換。Claude・ChatGPT・LINEの3スキン対応。">
<meta property="og:image" content="/ogp.png">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="app-header">
  <h1 class="app-title">Video Factory</h1>
  <div class="header-controls">
    <div class="ai-selector">
      <label class="ai-option">
        <input type="radio" name="aiType" value="claude" checked>
        <span class="ai-chip">Claude</span>
      </label>
      <label class="ai-option">
        <input type="radio" name="aiType" value="chatgpt">
        <span class="ai-chip">ChatGPT</span>
      </label>
      <label class="ai-option">
        <input type="radio" name="aiType" value="line">
        <span class="ai-chip">LINE</span>
      </label>
    </div>
    <div class="header-setting">
      <label for="targetDuration">尺</label>
      <input type="range" id="targetDuration" min="5" max="60" value="15" step="1">
      <span id="durationValue" class="setting-value">15秒</span>
    </div>
  </div>
</header>

<main class="app-main">
  <!-- 会話エディタ（メイン領域） -->
  <div class="editor-area">
    <div class="editor-toolbar">
      <span class="editor-label">会話</span>
      <div class="editor-actions">
        <button class="btn-tool" id="loadSampleBtn">サンプル読込</button>
        <button class="btn-tool" id="toggleJsonBtn">JSON</button>
      </div>
    </div>

    <!-- LINE設定（LINE選択時のみ表示） -->
    <div id="lineSettings" class="line-settings" style="display: none;">
      <div class="line-settings-row">
        <label class="line-settings-label">相手の名前</label>
        <input type="text" id="lineName" class="line-settings-input" value="AI" placeholder="表示名">
      </div>
      <div class="line-settings-row">
        <label class="line-settings-label">アイコン画像</label>
        <div class="line-avatar-picker">
          <img id="lineAvatarPreview" class="line-avatar-preview" style="display: none;">
          <button class="btn-tool" id="lineAvatarBtn">画像を選択</button>
          <button class="btn-tool" id="lineAvatarClear" style="display: none;">クリア</button>
        </div>
      </div>
    </div>

    <div id="editorView" class="editor-content">
      <div id="messageList" class="message-list"></div>
      <div class="add-message-row">
        <button class="btn-add" id="addMessageBtn">+ メッセージ追加</button>
      </div>
    </div>

    <div id="jsonView" class="editor-content" style="display: none;">
      <textarea id="conversationJson" class="json-editor" rows="20"></textarea>
      <button class="btn-tool" id="applyJsonBtn" style="margin-top: 8px;">JSONをエディタに反映</button>
    </div>

    <div id="jsonError" class="json-error"></div>
  </div>

</main>

<!-- 生成パネル（画面下部固定） -->
<footer class="generate-footer">
  <!-- ステータス表示エリア -->
  <div id="progressSection" class="footer-status" style="display: none;">
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
    <p class="progress-message" id="progressMessage">待機中...</p>
  </div>

  <!-- 自動ダウンロード用（非表示） -->
  <a id="downloadLink" href="#" download style="display:none;"></a>
  <span id="downloadMeta" style="display:none;"></span>

  <div id="errorSection" class="footer-status" style="display: none;">
    <span class="error-title-inline">エラー</span>
    <span class="error-message" id="errorMessage"></span>
  </div>

  <!-- 生成ボタン -->
  <button class="btn-generate" id="generateBtn">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
      <polygon points="5 3 19 12 5 21 5 3"/>
    </svg>
    動画を生成
  </button>
</footer>

<script src="app.js"></script>
</body>
</html>
